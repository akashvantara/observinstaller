downloadDirectory: downloads
installationDirectory: installs
baseOtelConfig: 
  extensions:
    - file_storage
    - health_check
    - oauth2client
  pipelines:
    logs:
      receivers:
        - filelog
      processors:
        - filter/body
        - resource/logs
      exporters: []
    metrics:
      receivers:
        - opencensus
        - otlp
        - prometheus/self
      processors:
        - attributes/insert
      exporters:
        - prometheusremotewrite
    traces:
      receivers:
        - otlp
        - zipkin
      processors:
        - attributes/insert
        - filter/body
      exporters:
        - otlp/promscale
        - otlp/tempo
packages:
  - name: Grafana
    url: 
      windows: https://dl.grafana.com/oss/release/grafana-10.0.1.linux-amd64.tar.gz
      linux: https://dl.grafana.com/oss/release/grafana-10.0.1.linux-amd64.tar.gz
      mac: https://dl.grafana.com/oss/release/grafana-10.0.1.linux-amd64.tar.gz
    run: 
      command:
        windows: "bin/grafana server"
        linux: "bin/grafana server"
        mac: "bin/grafana server"
      args: []
      envVariables: []
    installModeSupport:
      - full
  - name: Loki
    url: 
      windows: https://github.com/grafana/loki/releases/download/v2.8.2/loki-linux-amd64.zip
      linux: https://github.com/grafana/loki/releases/download/v2.8.2/loki-linux-amd64.zip
      mac: https://github.com/grafana/loki/releases/download/v2.8.2/loki-linux-amd64.zip
    run:
      command: 
        windows: "loki-linux-amd64"
        linux: "loki-linux-amd64"
        mac: "loki-linux-amd64"
      args: ["-config.file loki-local-config.yaml"]
      envVariables: []
    installModeSupport:
      - full
    pkgOtelConfig:
      type: exporters
      pipeline: logs
      config: > 
        loki/logs:
          endpoint: http://localhost:3100/loki/api/v1/push
  - name: Otel Collector
    url: 
      windows: https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v0.80.0/otelcol-contrib_0.80.0_linux_amd64.tar.gz
      linux: https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v0.80.0/otelcol-contrib_0.80.0_linux_amd64.tar.gz
      mac:  https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v0.80.0/otelcol-contrib_0.80.0_linux_amd64.tar.gz
    run:
      command: 
        windows: "otelcol-contrib"
        linux: "otelcol-contrib"
        mac: "otelcol-contrib"
      args: ["--config config.yaml > logs/otel.log 2> logs/otel_err.log"]
      envVariables: []
    installModeSupport:
      - full
  - name: Promscale
    url: 
      windows: https://github.com/timescale/promscale/releases/download/0.17.0/promscale_0.17.0_Linux_x86_64 
      linux: https://github.com/timescale/promscale/releases/download/0.17.0/promscale_0.17.0_Linux_x86_64
      mac: https://github.com/timescale/promscale/releases/download/0.17.0/promscale_0.17.0_Linux_x86_64
    run:
      command: 
        windows: "loki-linux-amd64 -config.file loki-local-config.yaml > logs/loki.log 2> logs/loki_err.log &"
        linux: "loki-linux-amd64 -config.file loki-local-config.yaml > logs/loki.log 2> logs/loki_err.log &"
        mac: "loki-linux-amd64 -config.file loki-local-config.yaml > logs/loki.log 2> logs/loki_err.log &"
      args: []
      envVariables: []
    installModeSupport:
      - full
    pkgOtelConfig:
      type: exporters
      pipeline: metrics
      config: >
        prometheusremotewrite:
          endpoint: http://localhost:9201/write
          tls:
            insecure: true
  - name: Test
    url: 
      windows: https://www.google.com/openobserve-v0.5.1-linux-amd64-musl.tar.gz
      linux: https://www.google.com/openobserve-v0.5.1-linux-amd64-musl.tar.gz
      mac: https://www.google.com/openobserve-v0.5.1-linux-amd64-musl.tar.gz
    run:
      command: 
        windows: "ls installs/*"
        linux: "openobserve"
        mac: "ls"
      args: []
      envVariables: ["ZO_ROOT_USER_EMAIL=akash.chandra@hv.com", "ZO_ROOT_USER_PASSWORD=test"]
    installModeSupport:
      - minimal
  - name: Test2
    url: 
      windows: ""
      linux: "" 
      mac: ""
    run:
      command: 
        windows: "ls installs/*"
        linux: "nc"
        mac: "ls"
      args: ["-l", "-p", "3000"]
      envVariables: []
    installModeSupport:
      - minimal
